<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Campus Canteen Connect | Order Online</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 

<style>
/* --- VARIABLES & BASE STYLES --- */
:root {
    --primary-green: #4CAF50; 
    --primary-dark: #333;
    --secondary-light: #f9f9f9;
    --text-dark: #333;
    --text-light: #fff;
    --shadow-subtle: 0 2px 8px rgba(0, 0, 0, 0.1);
    --card-bg: #fff;
}

body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background-color: var(--secondary-light);
    color: var(--text-dark);
    line-height: 1.6;
}
.container {
    width: 90%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px 0;
}

/* --- HEADER / NAVIGATION --- */
.header {
    background-color: var(--primary-dark);
    color: var(--text-light);
    box-shadow: var(--shadow-subtle);
}
.nav-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
}
.logo {
    font-size: 1.8em;
    font-weight: 700;
    color: var(--primary-green);
}
.nav-links a {
    color: var(--text-light);
    text-decoration: none;
    margin-left: 25px;
    font-weight: 600;
    transition: color 0.2s;
}
.nav-links a:hover {
    color: var(--primary-green);
}

/* --- HERO SECTION --- */
.hero {
    background: url('https://images.unsplash.com/photo-1498837167922-ddd27525d352?q=80&w=1470&auto=format&fit=crop') no-repeat center center/cover;
    height: 350px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin-bottom: 40px;
    position: relative;
}
.hero::after { 
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
}
.hero-content {
    z-index: 10;
    color: white;
}
.hero-content h1 {
    font-size: 3em;
    margin: 0 0 10px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
}
.hero-content p {
    font-size: 1.2em;
    font-weight: 400;
}

/* --- MENU FILTERS --- */
.filter-bar {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 30px;
    border-bottom: 2px solid #ddd;
    padding-bottom: 15px;
}
.filter-bar button {
    background: none;
    border: none;
    padding: 10px 20px;
    font-size: 1em;
    font-weight: 600;
    color: var(--primary-dark);
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: all 0.2s;
}
.filter-bar button:hover, .filter-bar button.active {
    color: var(--primary-green);
    border-bottom: 3px solid var(--primary-green);
}

/* --- MENU GRID --- */
.menu-grid-area {
    display: grid;
    grid-template-columns: 3fr 1fr;
    gap: 30px;
}
.menu-items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
}

.item-card.hidden {
    display: none !important;
}

/* --- ITEM CARD STYLING --- */
.item-card {
    background-color: var(--card-bg);
    border-radius: 10px;
    box-shadow: var(--shadow-subtle);
    overflow: hidden;
    transition: transform 0.3s;
}
.item-card:hover {
    transform: translateY(-3px);
}
.item-img {
    height: 160px;
    background-color: #e8f5e9; 
    background-size: cover;
    background-position: center;
}
.item-content {
    padding: 15px;
}
.item-name {
    font-weight: 700;
    font-size: 1.15em;
    margin-bottom: 5px;
}
.item-price {
    font-weight: 700;
    font-size: 1.4em;
    color: var(--primary-green);
}
.item-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px dashed #eee;
}

/* Quantity Control Buttons */
.quantity-control {
    display: flex;
    align-items: center;
    border: 1px solid #ddd;
    border-radius: 5px;
    overflow: hidden;
}
.qty-button {
    background-color: var(--primary-green);
    color: white;
    border: none;
    padding: 8px 12px;
    cursor: pointer;
    font-size: 0.9em;
}
.qty-button:hover { background-color: #388e3c; }
.item-qty {
    padding: 8px 10px;
    font-weight: 700;
    color: var(--text-dark);
    background-color: var(--card-bg);
    width: 20px;
    text-align: center;
    font-size: 0.9em;
}
.qty-button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

/* --- CART / CHECKOUT SECTION --- */
.cart-sidebar {
    background-color: var(--card-bg);
    padding: 20px;
    border-radius: 10px;
    box-shadow: var(--shadow-subtle);
    position: sticky;
    top: 90px;
    height: fit-content;
}
.cart-sidebar h3 {
    text-align: center;
    border-bottom: 2px solid var(--primary-green);
    padding-bottom: 10px;
    margin-bottom: 20px;
    color: var(--primary-dark);
}
.cart-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px dashed #eee;
    font-size: 0.9em;
}
#total {
    font-size: 1.5em;
    padding: 15px;
    margin-top: 20px;
    background-color: #e8f5e9; 
    border-radius: 8px;
    text-align: center;
    font-weight: 700;
    color: var(--primary-green);
}
.checkout-button {
    background: var(--primary-dark);
    width: 100%;
    margin-top: 10px;
}
.checkout-button:hover {
    background: black;
}

/* QR Code Modal Styling */
#qr-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
}
.qr-content {
    background: white;
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    max-width: 300px;
}
.qr-content img {
    width: 200px;
    height: 200px;
    margin-bottom: 15px;
}

/* --- FOOTER --- */
.footer {
    text-align: center;
    padding: 25px 0;
    margin-top: 50px;
    background-color: var(--primary-dark);
    color: #bbb;
}
</style>
</head>

<body>

<div id="qr-modal">
    <div class="qr-content">
        <h3>Scan to Pay</h3>
        <p id="qr-amount-text">Total: ₹0</p>
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=upi://pay?pa=canteen@upi&pn=CanteenConnect" alt="QR Code">
        <p><small>After payment, click below to get receipt</small></p>
        <button onclick="finalizeOrder()" class="qty-button" style="background: var(--primary-green); width: 100%;">PAYMENT DONE - GET RECEIPT</button>
        <button onclick="closeQR()" style="margin-top: 10px; background: none; border: none; cursor: pointer; color: red;">Cancel</button>
    </div>
</div>

<div class="header">
    <div class="container nav-bar">
        <div class="logo">Canteen Connect</div>
        <div class="nav-links">
            <a href="#menu"><i class="fas fa-list"></i> Menu</a>
            <a href="tel:+919876543210"><i class="fas fa-phone-alt"></i> Help: +91 98765 43210</a>
        </div>
    </div>
</div>

<div class="hero">
    <div class="hero-content">
        <h1>Fresh Food, Ready When You Are.</h1>
        <p>Order your campus favorites easily and checkout fast.</p>
    </div>
</div>

<div class="container" id="menu">
    <h2 style="text-align: center; color: var(--primary-dark); font-weight: 700; margin-bottom: 30px;">Today's Menu Selection</h2>

    <div class="filter-bar">
        <button class="active" onclick="filterMenu('all', this)">All Items</button>
        <button onclick="filterMenu('breakfast', this)">Breakfast</button>
        <button onclick="filterMenu('meals', this)">Meals</button>
        <button onclick="filterMenu('snacks', this)">Snacks</button>
        <button onclick="filterMenu('beverages', this)">Beverages</button>
    </div>

    <div class="menu-grid-area">
        <div class="menu-items-grid" id="menu-items-container">
            <div class="item-card item-type-breakfast" data-category="breakfast">
                <div class="item-img" style="background-image: url('https://www.indianhealthyrecipes.com/wp-content/uploads/2020/01/poha.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Poha</div>
                    <small>Fluffy, seasoned rice flakes.</small>
                    <div class="item-footer">
                        <div class="item-price">₹20</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('poha', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-poha">0</span>
                            <button class="qty-button" onclick="updateQty('poha', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-breakfast" data-category="breakfast">
                <div class="item-img" style="background-image: url('https://t4.ftcdn.net/jpg/10/88/62/83/360_F_1088628359_6ZskzdYQNvfT1QICDXE0W9kpISi4kgS4.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Upma</div>
                    <small>Semolina dish with veggies.</small>
                    <div class="item-footer">
                        <div class="item-price">₹25</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('upma', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-upma">0</span>
                            <button class="qty-button" onclick="updateQty('upma', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-breakfast" data-category="breakfast">
                <div class="item-img" style="background-image: url('https://vaya.in/recipes/wp-content/uploads/2018/02/Idli-and-Sambar-1.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Idli Sambar</div>
                    <small>Soft steamed rice cakes.</small>
                    <div class="item-footer">
                        <div class="item-price">₹35</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('idli', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-idli">0</span>
                            <button class="qty-button" onclick="updateQty('idli', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="item-card item-type-breakfast" data-category="breakfast">
                <div class="item-img" style="background-image: url('https://www.indianhealthyrecipes.com/wp-content/uploads/2022/03/veg-grilled-sandwich-recipe.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Veg Sandwich</div>
                    <small>Freshly grilled with chutney.</small>
                    <div class="item-footer">
                        <div class="item-price">₹40</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('sandwich', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-sandwich">0</span>
                            <button class="qty-button" onclick="updateQty('sandwich', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="item-card item-type-meals" data-category="meals">
                <div class="item-img" style="background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRIxuDVSOHhkXWd-reUJpUbXg7fK1dN_MD7Zg&s');"></div>
                <div class="item-content">
                    <div class="item-name">Deluxe Veg Thali</div>
                    <small>Full meal with all sides.</small>
                    <div class="item-footer">
                        <div class="item-price">₹120</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('thali', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-thali">0</span>
                            <button class="qty-button" onclick="updateQty('thali', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-meals" data-category="meals">
                <div class="item-img" style="background-image: url('https://www.tomatoblues.com/wp-content/uploads/2022/09/paneer-biryani-1.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Paneer Biryani</div>
                    <small>Aromatic and flavorful rice dish.</small>
                    <div class="item-footer">
                        <div class="item-price">₹120</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('biryani', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-biryani">0</span>
                            <button class="qty-button" onclick="updateQty('biryani', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-meals" data-category="meals">
                <div class="item-img" style="background-image: url('https://www.sharmispassions.com/wp-content/uploads/2014/11/SchezwanFriedRice5.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Schezwan Fried Rice</div>
                    <small>Spicy wok-tossed rice.</small>
                    <div class="item-footer">
                        <div class="item-price">₹85</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('schezwanrice', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-schezwanrice">0</span>
                            <button class="qty-button" onclick="updateQty('schezwanrice', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="item-card item-type-meals" data-category="meals">
                <div class="item-img" style="background-image: url('https://en-media.thebetterindia.com/uploads/2022/08/294156779_1082267416022212_8006411537588067133_n-1_11zon-1660981126.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Chole Bhature</div>
                    <small>Two fluffy bhaturas with chole curry.</small>
                    <div class="item-footer">
                        <div class="item-price">₹95</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('cholebhature', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-cholebhature">0</span>
                            <button class="qty-button" onclick="updateQty('cholebhature', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-snacks" data-category="snacks">
                <div class="item-img" style="background-image: url('https://ministryofcurry.com/wp-content/uploads/2025/08/samosa-6.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Samosa (2 pcs)</div>
                    <small>Crispy, potato-filled pastry.</small>
                    <div class="item-footer">
                        <div class="item-price">₹30</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('samosa', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-samosa">0</span>
                            <button class="qty-button" onclick="updateQty('samosa', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="item-card item-type-snacks" data-category="snacks">
                <div class="item-img" style="background-image: url('https://images.themodernproper.com/production/posts/2022/Homemade-French-Fries_8.jpg?w=1200&h=1200&q=60&fm=jpg&fit=crop&dm=1662474181&s=15046582e76b761a200998df2dcad0fd');"></div>
                <div class="item-content">
                    <div class="item-name">French Fries</div>
                    <small>Salty and crispy, large portion.</small>
                    <div class="item-footer">
                        <div class="item-price">₹60</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('fries', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-fries">0</span>
                            <button class="qty-button" onclick="updateQty('fries', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-snacks" data-category="snacks">
                <div class="item-img" style="background-image: url('https://blog.swiggy.com/wp-content/uploads/2024/11/Image-1_mumbai-vada-pav-1024x538.png');"></div>
                <div class="item-content">
                    <div class="item-name">Vada Pav</div>
                    <small>Mumbai's favorite street food.</small>
                    <div class="item-footer">
                        <div class="item-price">₹25</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('vadapav', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-vadapav">0</span>
                            <button class="qty-button" onclick="updateQty('vadapav', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-beverages" data-category="beverages">
                <div class="item-img" style="background-image: url('https://mytastycurry.com/wp-content/uploads/2020/04/Cafe-style-cold-coffee-with-icecream.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Coffee</div>
                    <small>Hot filter coffee.</small>
                    <div class="item-footer">
                        <div class="item-price">₹15</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('coffee', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-coffee">0</span>
                            <button class="qty-button" onclick="updateQty('coffee', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item-card item-type-beverages" data-category="beverages">
                <div class="item-img" style="background-image: url('https://www.sharmispassions.com/wp-content/uploads/2012/12/cardamom-tea4-500x500.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Tea (Chai)</div>
                    <small>Classic Indian milk tea.</small>
                    <div class="item-footer">
                        <div class="item-price">₹10</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('tea', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-tea">0</span>
                            <button class="qty-button" onclick="updateQty('tea', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="item-card item-type-beverages" data-category="beverages">
                <div class="item-img" style="background-image: url('https://www.tastingtable.com/img/gallery/the-soda-brand-you-are-based-on-your-zodiac-sign/l-intro-1694058410.jpg');"></div>
                <div class="item-content">
                    <div class="item-name">Cold Drink</div>
                    <small>Selection of bottled soft drinks.</small>
                    <div class="item-footer">
                        <div class="item-price">₹30</div>
                        <div class="quantity-control">
                            <button class="qty-button" onclick="updateQty('cold', -1)" disabled><i class="fas fa-minus"></i></button>
                            <span class="item-qty" id="qty-cold">0</span>
                            <button class="qty-button" onclick="updateQty('cold', 1)"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="cart-sidebar">
            <h3><i class="fas fa-shopping-cart"></i> Your Order</h3>
            
            <div style="margin-bottom: 15px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">Your Name:</label>
                <input type="text" id="user-name" placeholder="Enter your name" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box;">
            </div>

            <div id="cart-summary">
                <p style="text-align: center; color: #666;">No items added yet.</p>
            </div>

            <div id="total">Total Amount: ₹0</div>

            <button onclick="calculate()" class="qty-button checkout-button">
                UPDATE TOTAL
            </button>

            <div style="margin-top: 15px; text-align: center;">
                <label for="payment" style="font-weight: 600;">Payment:</label>
                <select id="payment" style="padding: 8px; border-radius: 5px; width: 100%;">
                    <option value="UPI">UPI (Preferred)</option>
                    <option value="Cash">Cash</option>
                    <option value="Card">Card/Debit</option>
                </select>
            </div>

            <button onclick="handleOrder()" class="qty-button checkout-button" style="background: var(--primary-green);">
                <i class="fas fa-receipt"></i> PLACE ORDER
            </button>
        </div>
    </div>
    
</div>

<div class="footer">
    Campus Canteen Connect &copy; 2025 | Fresh. Fast. Convenient.
</div>

<script>
const menuData = {
    poha: { name: "Poha", price: 20 },
    upma: { name: "Upma", price: 25 },
    idli: { name: "Idli Sambar", price: 35 },
    sandwich: { name: "Veg Sandwich", price: 40 },
    thali: { name: "Deluxe Veg Thali", price: 120 },
    biryani: { name: "Paneer Biryani", price: 120 },
    schezwanrice: { name: "Sch. Fried Rice", price: 85 },
    cholebhature: { name: "Chole Bhature", price: 95 },
    samosa: { name: "Samosa (2 pcs)", price: 30 },
    fries: { name: "French Fries", price: 60 },
    vadapav: { name: "Vada Pav", price: 25 },
    coffee: { name: "Coffee", price: 15 },
    tea: { name: "Tea (Chai)", price: 10 },
    cold: { name: "Cold Drink", price: 30 }
};

let currentTotal = 0;

function updateQty(itemId, delta) {
    const qtyElement = document.getElementById(`qty-${itemId}`);
    const minusButton = qtyElement.previousElementSibling;
    let currentQty = parseInt(qtyElement.textContent);
    
    let newQty = currentQty + delta;
    if (newQty < 0) newQty = 0;
    
    qtyElement.textContent = newQty;
    minusButton.disabled = (newQty === 0);
    
    updateCartSummary();
    calculate();
}

function updateCartSummary() {
    let summaryHTML = "";
    let totalItems = 0;
    
    Object.keys(menuData).forEach(itemId => {
        const qtyElement = document.getElementById(`qty-${itemId}`);
        const qty = qtyElement ? parseInt(qtyElement.textContent) : 0;
        if (qty > 0) {
            summaryHTML += `
                <div class="cart-item">
                    <span>${menuData[itemId].name} x ${qty}</span>
                    <span>₹${qty * menuData[itemId].price}</span>
                </div>
            `;
            totalItems += qty;
        }
    });

    const cartSummaryElement = document.getElementById("cart-summary");
    if (totalItems === 0) {
        cartSummaryElement.innerHTML = `<p style="text-align: center; color: #666;">No items added yet.</p>`;
    } else {
        cartSummaryElement.innerHTML = summaryHTML;
    }
}

function calculate() {
    let total = 0;
    Object.keys(menuData).forEach(itemId => {
        const qtyElement = document.getElementById(`qty-${itemId}`);
        const qty = qtyElement ? parseInt(qtyElement.textContent) : 0;
        total += qty * menuData[itemId].price;
    });
    currentTotal = total;
    document.getElementById("total").innerHTML = "Total Amount: ₹" + total;
}

function filterMenu(category, button) {
    document.querySelectorAll('.filter-bar button').forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');

    const menuItems = document.querySelectorAll('.item-card');
    menuItems.forEach(item => {
        const itemCategory = item.getAttribute('data-category');
        if (category === 'all' || itemCategory === category) {
            item.classList.remove('hidden');
        } else {
            item.classList.add('hidden');
        }
    });
}

// HANDLER FOR ORDERING
function handleOrder() {
    calculate();
    const name = document.getElementById("user-name").value.trim();
    if (!name) {
        alert("Please enter your name.");
        return;
    }
    if (currentTotal === 0) {
        alert("Your cart is empty.");
        return;
    }

    const method = document.getElementById("payment").value;
    if (method === "UPI") {
        document.getElementById("qr-amount-text").innerText = "Total: ₹" + currentTotal;
        document.getElementById("qr-modal").style.display = "flex";
    } else {
        finalizeOrder();
    }
}

function closeQR() {
    document.getElementById("qr-modal").style.display = "none";
}

function finalizeOrder() {
    closeQR();
    showReceipt();
}

function showReceipt() {
    const name = document.getElementById("user-name").value;
    let payment = document.getElementById("payment").value;
    let itemRows = "";
    let finalTotal = 0;
    
    Object.keys(menuData).forEach(itemId => {
        const item = menuData[itemId];
        const qty = parseInt(document.getElementById(`qty-${itemId}`).textContent);
        if (qty > 0) {
            const itemTotal = qty * item.price;
            finalTotal += itemTotal;
            itemRows += `
                <tr>
                    <td style="text-align: left; padding: 8px 0; border-bottom: 1px dashed #eee;">${item.name}</td>
                    <td style="text-align: center;">${qty}</td>
                    <td style="text-align: right;">₹${item.price}</td>
                    <td style="text-align: right;">₹${itemTotal}</td>
                </tr>`;
        }
    });

    const receiptHTML = `
        <!DOCTYPE html>
        <html>
        <head>
            <title>Canteen Receipt</title>
            <style>
                body { font-family: Arial, sans-serif; background: #f4f4f9; padding: 20px; display: flex; justify-content: center; }
                .receipt-box { width: 100%; max-width: 400px; background: #fff; border: 1px solid #ddd; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
                .header-receipt { text-align: center; border-bottom: 3px double #333; margin-bottom: 20px; padding-bottom: 10px; }
                .header-receipt h1 { font-size: 1.5em; color: #4CAF50; margin: 0; }
                .items-table { width: 100%; border-collapse: collapse; font-size: 0.9em; }
                .items-table th { text-align: right; padding: 8px 0; border-bottom: 1px solid #333; }
                .items-table th:first-child { text-align: left; }
                .total-section { margin-top: 20px; border-top: 1px dashed #333; padding-top: 15px; }
                .total-row { display: flex; justify-content: space-between; font-size: 1.2em; font-weight: 700; color: #4CAF50; }
                .footer-receipt { text-align: center; margin-top: 30px; font-size: 0.85em; color: #999; }
                .user-info { margin-bottom: 10px; font-weight: bold; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            </style>
        </head>
        <body>
            <div class="receipt-box">
                <div class="header-receipt">
                    <h1>CAMPUS CANTEEN CONNECT</h1>
                    <p>Date: ${new Date().toLocaleDateString()}</p>
                    <p>Order ID: #CC${Math.floor(Math.random() * 100000)}</p>
                </div>
                <div class="user-info">Customer: ${name}</div>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th style="width: 50%;">ITEM</th>
                            <th style="width: 15%; text-align: center;">QTY</th>
                            <th style="width: 15%;">RATE</th>
                            <th style="width: 20%;">AMOUNT</th>
                        </tr>
                    </thead>
                    <tbody>${itemRows}</tbody>
                </table>
                <div class="total-section">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <span>Payment Method:</span><span>${payment}</span>
                    </div>
                    <div class="total-row">
                        <span>GRAND TOTAL:</span><span>₹${finalTotal}</span>
                    </div>
                </div>
                <div class="footer-receipt">
                    <button onclick="window.print()" style="padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Receipt</button>
                    <p>Thank you for choosing Canteen Connect!</p>
                </div>
            </div>
        </body>
        </html>`;
    
    const newTab = window.open("", "_blank");
    newTab.document.write(receiptHTML);
    newTab.document.close();
}

window.onload = function() {
    Object.keys(menuData).forEach(itemId => {
        const qtyElement = document.getElementById(`qty-${itemId}`);
        if (qtyElement) {
            qtyElement.previousElementSibling.disabled = true;
        }
    });
    filterMenu('all', document.querySelector('.filter-bar button.active'));
};
</script>

</body>
</html>
